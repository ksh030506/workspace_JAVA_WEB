<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"
%><%@ page import="java.sql.*, java.util.*"%>
<%!
Connection conn = null;
Statement stmt = null;
ResultSet rs = null;
	
	String query = "select * from member";
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<%
    try {
        String DB_HOST = "jdbc:oracle:thin:@localhost:1521:xe"; // 아이피, 포트, 서비스(SID) 정보를 수정
        String DB_USER = "ksh030506"; // 아이디(유저) - 11g 이상시 대소문자 구분 확인
        String DB_PASS = "000000"; // 패스워 - 11g 이상시 대소문자 구분 확인
        
        Class.forName("oracle.jdbc.driver.OracleDriver");
        conn = DriverManager.getConnection(DB_HOST, DB_USER, DB_PASS);
        
        out.println("연결성공!");
        
        
		stmt = conn.createStatement();
		rs = stmt.executeQuery(query);
        
        
		while(rs.next()){
			String id = rs.getString("ID");
			String pw = rs.getString("PW");
			String name = rs.getString("NAME");
			String phone = rs.getString("PHONE");
			
			out.println("아이디 : " + id + ", 비밀번호 : " + pw + ", 이름 : " + name + ", 전화번호 : " + phone +"<br/>");
		}
        
        
        
        
    } catch (ClassNotFoundException e) {
        out.println("연결 드라이버 없음");
    } catch (SQLException e) {
        out.print("연결실패 : ");
        if(e.getMessage().indexOf("ORA-28009") > -1)
            out.println("허용되지 않는 접속 권한 없음");    
        else if(e.getMessage().indexOf("ORA-01017") > -1)
            out.println("유저/패스워드 확인");    
        else if(e.getMessage().indexOf("IO") > -1)
            out.println("IO - 연결확인!");
        else
            out.println("기본 연결확인!");
        
    } finally {
		
		try {
			if(rs != null) rs.close();
			if(stmt != null) stmt.close();
			if(conn != null) conn.close();
		}catch(Exception e) {
			out.print(e.getMessage());
		}
	}
%>

</body>
</html>